<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Adoptar | AlqoMishi</title>
        <!-- Site favicon -->
        <link rel="icon" type="image/png" sizes="32x32" th:href="@{images/favicon.png}">

        <!-- Mobile Specific Metas -->
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

        <!-- Google Font -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
        <!-- CSS -->
        <link rel="stylesheet" type="text/css" th:href="@{admin/vendors/styles/core.css}">
        <link rel="stylesheet" type="text/css" th:href="@{admin/vendors/styles/icon-font.min.css}">
        <link rel="stylesheet" type="text/css" th:href="@{admin/src/plugins/jquery-steps/jquery.steps.css}">
        <link rel="stylesheet" type="text/css" th:href="@{admin/vendors/styles/style.css}">

        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-119386393-1"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());

            gtag('config', 'UA-119386393-1');
        </script>

    </head>
    <body class="login-page">
        <div class="login-header box-shadow">
            <div class="container-fluid d-flex justify-content-between align-items-center">
                <div class="brand-logo">
                    <a th:href="@{/CatalogoAnimal}">
                        <img th:src="@{images/logo_transparent-198x86.png}" alt="">
                    </a>
                </div>
                <div class="login-menu">
                    <ul>
                        <li><a href="">Registro de Adopcion</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="login-wrap d-flex align-items-center flex-wrap justify-content-center">
            <div class="container">
                <h1 class="mb-30 text-blue h1" style="text-align: center;"> Registrar Solicitud de Adopción</h1>
                <div class="row align-items-center">

                    <div class="col-md-6 col-lg-12">
                        <div class="pd-20 card-box mb-30">
                            <div class="clearfix">
                                <h4 class="text-blue h4">Datos de Envío</h4>
                            </div>
                            <div class="wizard-content">
                                <form action="/guardarAdopcion" id="frmSolicitar" method="post" class="tab-wizard wizard-circle wizard"  autocomplete="on"  th:object="${adopcion}" >
                                    <h5>Información Personal</h5>
                                    <section>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <input type="hidden"  class="form-control"  th:field="*{idadopcion}">
                                                <div class="form-group">
                                                    <label >*Nombres :</label>
                                                    <input type="text"  class="form-control" th:field="*{adoptante.nombreadop}">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label >*Apellidos :</label>
                                                    <input type="text"  class="form-control"  th:field="*{adoptante.apellidos}">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>*Email para confirmar pedido :</label>
                                                    <input type="email"  class="form-control"  th:field="*{adoptante.correo}">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>*Teléfono :</label>
                                                    <input type="text"  class="form-control"  th:field="*{adoptante.telefono}">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>DNI :</label>
                                                    <input type="text" class="form-control"  th:field="*{adoptante.dni}">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label >*Fecha de Nacimiento :</label>
                                                    <input type="date"  class="form-control"  th:field="*{adoptante.fechanac}" placeholder="Select Date">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>*Ciudad :</label>
                                                    <select class="custom-select form-control" th:field="*{adoptante.ciudad}" >
                                                        <option value="">Select City</option>
                                                        <option value="Comas">Comas</option>
                                                        <option value="Los olivos">Los Olivos</option>
                                                        <option value="San Martin de Porres">San Martin de Porres</option>
                                                        <option value="Breña">Breña</option>
                                                        <option value="Breña">Miraflores</option>
                                                        <option value="Breña">San Isidro</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label >*Codigo Postal :</label>
                                                    <input type="text" class="form-control" th:field="*{adoptante.codigopostal}">
                                                </div>
                                            </div>
                                        </div>

                                    </section>
                                    <!-- Step 2 -->
                                    <h5>Datos de Animal</h5>
                                    <section>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <input type="hidden" class="form-control"  th:field="*{animal.idanimal}">
                                                <div class="form-group">
                                                    <label>*Nombre :</label>
                                                    <input type="text" class="form-control" th:field="*{animal.nombre}" readonly="readonly">
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <input type="hidden" th:field="*{animal.especie.idespecie}">
                                                <div class="form-group">
                                                    <label>*Especie :</label>
                                                    <input type="text"  class="form-control" th:field="*{animal.especie.especie}" readonly="readonly">
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>*Descripción :</label>
                                                    <textarea class="form-control" th:field="*{animal.descripcion}" readonly="readonly"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Step 3 -->
                                    <h5>Método de Envío</h5>
                                    <section>
                                        <div class="row">

                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>*Tipo de Envio :</label>
                                                    <select class="form-control"  th:field="*{envio.idenvio}">
                                                        <option th:each="c : ${metodo}" 
                                                                th:value="${c.idenvio}"
                                                                th:text="${c.nombreenvio}"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>*Fecha aprox. de Envio :</label>
                                                    <input type="date" class="form-control"  placeholder="Select Date"  th:field="*{fechaenvio}">
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- Step 4 -->
                                    <h5>Proceso Final</h5>
                                    <section>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label>*¿Por qué quieres Adoptar?</label>
                                                    <textarea class="form-control" th:field="*{mensaje}"></textarea>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <br>
                                                <ul class="list-unstyled">
                                                    <li class="mb-30"> AlqoMishi se pondrá en contacto contigo por correo en las siguientes 48 horas de completado el formulario para programar una entrevista por videollamada contigo.</li>
                                                    <li class="mb-30"> Luego de la entrevista, en las siguientes 24 horas nos pondremos en contacto contigo para indicarte el resultado de tu solicitud de adopción y los pasos a seguir.</li>
                                                </ul>

                                            </div>
                                            <div class="col-md-12">
                                                <div class="custom-control custom-checkbox mb-5">
                                                    <input type="checkbox" class="custom-control-input" id="customCheck1">
                                                    <label class="custom-control-label" for="customCheck1">Acepto los Términos y Condiciones</label>
                                                </div>
                                                <div class="custom-control custom-checkbox mb-5">
                                                    <input type="checkbox" class="custom-control-input" id="customCheck2">
                                                    <label class="custom-control-label" for="customCheck2">Acepto la política y privacidad</label>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                    <!-- success Popup html Start-->

                                    <div class="modal fade" id="success-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered" role="document">
                                            <div class="modal-content">
                                                <div class="modal-body text-center font-18">
                                                    <h3 class="mb-20">Registro Enviado!</h3>
                                                    <div class="mb-30 text-center"><img src="admin/vendors/images/success.png"></div>
                                                    Nos pondremos en contacto contigo para indicarte el resultado de tu solicitud de adopción
                                                </div>
                                                <div class="modal-footer justify-content-center">
                                                    <button type="submit" class="btn btn-primary" >Enviar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- success Popup html End -->
                                </form>
                            </div>
                        </div>

                    </div>


                </div>
            </div>
        </div>



        <!-- js -->
        <script th:src="@{admin/vendors/scripts/core.js}"></script>
        <script th:src="@{admin/vendors/scripts/script.min.js}"></script>
        <script th:src="@{admin/vendors/scripts/process.js}"></script>
        <script th:src="@{admin/vendors/scripts/layout-settings.js}"></script>
        <script th:src="@{admin/src/plugins/jquery-steps/jquery.steps.js}"></script>
        <!--  <script th:src="@{admin/vendors/scripts/steps-setting.js}"></script> -->
    </body>
    <script>
    	function ValidarCampos1(){
    		return false;
    	}
    
        $(".tab-wizard").steps({
            headerTag: "h5",
            bodyTag: "section",
            transitionEffect: "fade",
            titleTemplate: '<span class="step">#index#</span> #title#',
            labels: {
                finish: "Enviar"
            },
            onStepChanged: function (event, currentIndex, priorIndex) {
            	$('.steps .current').prevAll().addClass('disabled');
            },
            onFinished: function (event, currentIndex) {
            	if (($('#customCheck1').is(':checked') && $('#customCheck2').is(':checked'))) {
            		Solicitar();
            	}else{
            		alert("Por favor seleccione las condiciones y terminos.");
            	}
  
                
            }
        });

        $(".tab-wizard2").steps({
            headerTag: "h5",
            bodyTag: "section",
            transitionEffect: "fade",
            titleTemplate: '<span class="step">#index#</span> <span class="info">#title#</span>',
            labels: {
                finish: "Submit",
                next: "Next",
                previous: "Previous",
            },
            onStepChanged: function (event, currentIndex, priorIndex) {
          
                $('.steps .current').prevAll().addClass('disabled');
            },
            onFinished: function (event, currentIndex) {
            
                $('#success-modal-btn').trigger('click');
            }
        });

        function Solicitar() {
            $.ajax({
                type: "post",
                url: "/guardarAdopcion",
                data: $("#frmSolicitar").serialize(),
                success: function (data) {
                    $('#success-modal').modal('show');
                    setTimeout(function () {
                        $(location).attr("href" , "/CatalogoAnimal");
                    }, 6000);
                },
                error: function (xhr, status, errorThrown) {
                    alert("No se ha podido procesar informacion,se encontraron campos vacios al momento de enviar la solicitud.");
                }
            });
        }
    </script>
</html>